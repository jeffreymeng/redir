<html>
<head>
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>

    <script>
        var name = window.location.hash.substring(1)
        var fb = new Firebase("https://jeffreymeng.firebaseio.com/redir");
        if (name !== null || name !== "") {
            fb.once("value", function(snapshot) {
            if (snapshot.child(name).val() !== null) {
                window.location.href = snapshot.child(name).val();
            }
        }
        
    });
        </script>
	<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>
<body>
    <h1>Redirect</h1>
<p class="text-muted">Jeffrey's link redirection service.</p>
<div id="create">
<p>Welcome to redir</p>
<p>Create a redirection link below:</p>
<form>
    <input type="text" placeholder="Please enter the name of your redirection" id="n" class="form-control">
    <input type="text" placeholder="Please enter the link to redirect to" id="l" class="form-control">

    <button id="submit" class="form-control" style="color:green;"></button>
</form>
</div>
	<script>       
	       var fb = new Firebase("https://jeffreymeng.firebaseio.com/redir");

            var doc = jQuery(document);
            doc.ready(setup);


            function setup() {
                var button;
                button = jQuery("#submit");
                button.click(send);
            }


            function send() {
                var name = $("#n").val();
                var input = $("l").val();
                if ( !(fb.child(name).exists()) ) {
                    fb.child(name).set(input);
                } else {
                    alert("your name was taken, please try again")
                }
            }


	</script>

</body>
</html>