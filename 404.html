<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-database.js"></script>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyDoXIdwM34SiFL2jB055Jo4VdyJk-pVIDA",
        authDomain: "jcabinet.firebaseapp.com",
        databaseURL: "https://jcabinet.firebaseio.com",
        projectId: "firebase-jcabinet",
        storageBucket: "firebase-jcabinet.appspot.com",
        messagingSenderId: "1056566579088"
    };
    firebase.initializeApp(config);
</script>
<script>

    if (window.location.hash !== "") {
        firebase.database().ref("/links/jmls/" + encodeURIComponent(window.location.hash.substring(1)) + "/value/").once("value").then(function (snapshot) {
            if (snapshot.val() !== null) {
                window.location.href = snapshot.val();
            } else {
                document.open();//clears everything

                document.write(`
                <html><head>
                <link rel="stylesheet" type="text/css" href="https://cdn.jeffkmeng.com/bootstrap/4.0.0/css/bootstrap.min.css">
                </head><body>
                <div class="container">
                    <div class="col-lg-12">
                        <h1>404 Error: File not found</h1>
                        <p class="text-muted">Jeffkmeng Link Shortener</p>
                        <hr>
                        <p>The link you are at did not match a short link on jkmls. If you hand-typed this link, double check your spelling. You can also take this link on the main page:</p>
                        <a href="/">Return to main page</a>
                    </div>
                </div>
                `)
            }
        });
    }

</script>
